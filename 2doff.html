<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2D ON → OFF berdasarkan JUMLAH</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-800">
  <div class="max-w-4xl mx-auto p-6">
    <h1 class="text-2xl font-bold mb-3">2D ON → OFF (Berdasarkan JUMLAH)</h1>
    <p class="mb-4 text-sm text-slate-600">
      Masukkan angka 2D dipisahkan dengan tanda <code>*</code>, contoh: <code>23*32*45*</code><br>
      Jika angka 2D ditemukan di daftar JUMLAH, maka dianggap OFF dan dihapus dari daftar.
    </p>

    <div class="bg-white p-4 rounded shadow mb-6">
      <label class="block mb-2 font-medium">Input 2D ON (pisahkan dengan *):</label>
      <textarea id="inputOn" rows="3" class="w-full border rounded p-2" placeholder="contoh: 23*32*45*"></textarea>
      <div class="mt-3 flex gap-2">
        <button id="processBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Proses</button>
        <button id="resetBtn" class="px-4 py-2 bg-gray-200 rounded">Reset</button>
        <button id="copyResultBtn" class="px-4 py-2 bg-green-600 text-white rounded">Salin Hasil</button>
      </div>
    </div>

    <div class="grid md:grid-cols-2 gap-4">
      <div class="bg-white p-4 rounded shadow">
        <h2 class="font-semibold mb-2">Hasil</h2>
        <div id="resultsArea" class="text-sm text-slate-700">
          <p class="text-slate-500">Belum diproses.</p>
        </div>
      </div>

      <div class="bg-white p-4 rounded shadow">
        <h2 class="font-semibold mb-2">Daftar JUMLAH (ter-update)</h2>
        <div id="listsArea" class="text-sm text-slate-700 overflow-auto max-h-96"></div>
      </div>
    </div>
  </div>

  <script>
    // ====== Data JUMLAH ======
    const ORIGINAL = {
      "JUMLAH 0": "02*06*17*19*20*28*29*33*37*46*48*55*56*59*60*64*65*66*67*71*73*76*77*78*82*84*87*88*91*92*95*99*",
      "JUMLAH 1": "00*02*03*06*13*17*20*28*30*31*39*44*48*57*59*60*66*67*71*75*76*77*78*82*84*87*88*89*93*95*98*99*",
      "JUMLAH 2": "00*04*06*09*11*13*14*17*24*28*31*39*40*41*42*55*59*60*68*71*77*78*82*86*87*88*89*90*93*95*98*99*",
      "JUMLAH 3": "00*01*04*06*09*10*11*15*17*22*24*25*28*35*39*40*42*51*52*53*60*66*71*79*82*88*89*90*93*97*98*99*",
      "JUMLAH 4": "00*01*04*08*09*10*11*12*15*17*21*22*26*28*33*35*36*39*40*46*51*53*62*63*64*71*77*80*82*90*93*99*",
      "JUMLAH 5": "00*01*04*10*11*12*15*19*21*22*23*26*28*32*33*37*39*40*44*46*47*51*57*62*64*73*74*75*82*88*91*93*",
      "JUMLAH 6": "02*04*11*12*15*20*21*22*23*26*32*33*34*37*39*40*43*44*48*51*55*57*58*62*68*73*75*84*85*86*93*99*",
      "JUMLAH 7": "00*04*13*15*22*23*26*31*32*33*34*37*40*43*44*45*48*51*54*55*59*62*66*68*69*73*79*84*86*95*96*97*",
      "JUMLAH 8": "06*07*08*11*15*24*26*33*34*37*42*43*44*45*48*51*54*55*56*59*60*62*65*66*70*73*77*79*80*84*95*97*",
      "JUMLAH 9": "06*08*17*18*19*22*26*35*37*44*45*48*53*54*55*56*59*60*62*65*66*67*71*73*76*77*80*81*84*88*91*95*"
    };

    let lists = {};

    function norm2d(s) {
      const d = (s || "").replace(/\D/g, "");
      if (!d) return null;
      return d.padStart(2, "0").slice(-2);
    }

    function loadOriginal() {
      lists = {};
      for (const key in ORIGINAL) {
        lists[key] = ORIGINAL[key]
          .split("*")
          .map(norm2d)
          .filter(Boolean);
      }
    }

    function renderLists() {
      const c = document.getElementById("listsArea");
      c.innerHTML = "";
      for (const key in lists) {
        const arr = lists[key];
        c.innerHTML += `<div class="mb-3">
          <div class="font-medium">${key} <span class="text-xs text-slate-500">(${arr.length})</span></div>
          <div class="text-xs mt-1 p-2 bg-slate-50 border rounded"><code>${arr.join(" ") || "-"}</code></div>
        </div>`;
      }
    }

    function processInput(txt) {
      const nums = txt.split("*").map(norm2d).filter(Boolean);
      const off = [], on = [];
      const seen = new Set();

      for (const num of nums) {
        if (seen.has(num)) continue;
        seen.add(num);
        let found = false;
        for (const key in lists) {
          const idx = lists[key].indexOf(num);
          if (idx >= 0) {
            lists[key].splice(idx, 1);
            off.push({num, key});
            found = true;
          }
        }
        if (!found) on.push(num);
      }
      return {off, on};
    }

    function renderResults(res) {
      const a = document.getElementById("resultsArea");
      if (!res.off.length && !res.on.length) {
        a.innerHTML = '<p class="text-slate-500">Tidak ada perubahan.</p>';
        return;
      }
      let html = "";
      if (res.off.length) {
        html += `<div class="mb-2"><div class="font-medium">Menjadi OFF (${res.off.length})</div><ul class="list-disc pl-5 text-sm">`;
        res.off.forEach(r => html += `<li>${r.num} → ${r.key}</li>`);
        html += "</ul></div>";
      }
      if (res.on.length) {
        html += `<div><div class="font-medium">Tetap ON (${res.on.length})</div><ul class="list-disc pl-5 text-sm">`;
        res.on.forEach(r => html += `<li>${r}</li>`);
        html += "</ul></div>`;
      }
      a.innerHTML = html;
    }

    document.getElementById("processBtn").onclick = () => {
      const val = document.getElementById("inputOn").value.trim();
      if (!val) { alert("Isi angka 2D dulu."); return; }
      const res = processInput(val);
      renderResults(res);
      renderLists();
    };

    document.getElementById("resetBtn").onclick = () => {
      loadOriginal();
      renderLists();
      document.getElementById("resultsArea").innerHTML = '<p class="text-slate-500">Reset ke kondisi awal.</p>';
    };

    };

    // Init
    loadOriginal();
    renderLists();
  </script>
</body>
</html>

    document.getElementById("copyResultBtn").onclick = () => {
      const txt = document.getElementById("resultsArea").innerText;
      navigator.clipboard.writeText(txt).then(() => alert("Hasil disalin!"));
