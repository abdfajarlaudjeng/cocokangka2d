<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SHIO 2D Predictor</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .number-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            gap: 8px;
        }
        .number-item {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: transform 0.2s ease;
        }
        .number-item:hover {
            transform: translateY(-2px);
        }
        .shio-card {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            border-radius: 12px;
            padding: 16px;
            margin: 8px 0;
            color: white;
            font-weight: 600;
        }
        .generate-btn {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            transition: all 0.3s ease;
        }
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(245, 87, 108, 0.4);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="min-h-full gradient-bg">
  <main class="container mx-auto px-4 py-8">
   <div class="max-w-4xl mx-auto"><!-- Header -->
    <header class="text-center mb-8">
     <h1 id="app-title" class="text-4xl font-bold text-white mb-2">SHIO 2D Predictor</h1>
     <p class="text-white/80 text-lg">Prediksi angka 2D berdasarkan sistem SHIO</p>
    </header><!-- SHIO Data Display -->
    <section class="bg-white/10 backdrop-blur-sm rounded-xl p-6 mb-8 card-shadow">
     <h2 class="text-2xl font-bold text-white mb-4">Data SHIO Main</h2>
     <div class="grid gap-3">
      <div class="shio-card"><span class="font-bold">JUMLAH 1:</span> 1, 3, 7, 2, 6, 8
      </div>
      <div class="shio-card"><span class="font-bold">JUMLAH 2:</span> 3, 7, 9, 2, 4, 8
      </div>
      <div class="shio-card"><span class="font-bold">JUMLAH 3:</span> 3, 5, 9, 4, 8, 10
      </div>
      <div class="shio-card"><span class="font-bold">JUMLAH 4:</span> 5, 9, 11, 4, 6, 10
      </div>
      <div class="shio-card"><span class="font-bold">JUMLAH 5:</span> 5, 7, 11, 6, 10, 12
      </div>
      <div class="shio-card"><span class="font-bold">JUMLAH 6:</span> 1, 7, 11, 6, 8, 12
      </div>
      <div class="shio-card"><span class="font-bold">JUMLAH 7:</span> 1, 7, 9, 2, 8, 12
      </div>
      <div class="shio-card"><span class="font-bold">JUMLAH 8:</span> 1, 3, 9, 2, 8, 10
      </div>
      <div class="shio-card"><span class="font-bold">JUMLAH 9:</span> 3, 9, 11, 2, 4, 10
      </div>
     </div>
    </section><!-- Prediction Generator -->
    <section class="bg-white rounded-xl p-6 card-shadow mb-8">
     <h2 id="prediction-label" class="text-2xl font-bold text-gray-800 mb-4">Prediksi 2D ON</h2><!-- Filter Controls -->
     <div class="bg-gray-50 p-4 rounded-lg mb-6">
      <h3 class="text-lg font-semibold text-gray-700 mb-3">Filter Angka Main</h3>
      <div class="grid md:grid-cols-2 gap-4">
       <div><label for="main-numbers" class="block text-sm font-medium text-gray-700 mb-2"> Angka Main (maksimal 7 digit) </label> <input type="text" id="main-numbers" placeholder="Contoh: 1234567" maxlength="7" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        <p class="text-xs text-gray-500 mt-1">Masukkan angka tanpa spasi atau tanda baca</p>
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-2"> Filter Berdasarkan </label>
        <div class="space-y-2"><label class="flex items-center"> <input type="radio" name="filter-type" value="kepala" class="mr-2"> <span>Kepala (digit pertama)</span> </label> <label class="flex items-center"> <input type="radio" name="filter-type" value="ekor" class="mr-2"> <span>Ekor (digit terakhir)</span> </label> <label class="flex items-center"> <input type="radio" name="filter-type" value="semua" class="mr-2" checked> <span>Semua angka</span> </label>
        </div>
       </div>
      </div>
     </div>
     <div class="text-center mb-6"><button id="generate-btn" class="generate-btn text-white px-8 py-3 rounded-lg font-bold text-lg"> Generate Prediksi </button>
     </div>
     <div id="prediction-result" class="hidden">
      <div class="mb-4">
       <h3 class="text-lg font-semibold text-gray-700 mb-2">SHIO Terpilih:</h3>
       <div id="selected-shio" class="bg-blue-100 p-3 rounded-lg font-bold text-blue-800"></div>
      </div>
      <div class="mb-4">
       <h3 class="text-lg font-semibold text-gray-700 mb-2">Angka Dasar SHIO:</h3>
       <div id="base-numbers" class="number-grid"></div>
      </div>
      <div class="mb-6">
       <h3 class="text-lg font-semibold text-gray-700 mb-2">Semua Prediksi 2D ON:</h3>
       <div id="prediction-numbers" class="number-grid"></div>
      </div><!-- Filtered Results -->
      <div id="filtered-result" class="hidden">
       <div class="bg-green-50 border border-green-200 rounded-lg p-4">
        <div class="flex justify-between items-center mb-3">
         <h3 class="text-lg font-semibold text-green-800">Hasil Filter Angka Main</h3><button id="copy-btn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"> ðŸ“‹ Salin </button>
        </div>
        <div id="filter-info" class="text-sm text-green-700 mb-3"></div>
        <div id="filtered-numbers" class="bg-white p-4 rounded border font-mono text-lg leading-relaxed break-all"></div>
        <div id="filtered-count" class="text-sm text-green-600 mt-2 font-medium"></div>
       </div>
      </div>
     </div>
    </section><!-- Footer -->
    <footer class="text-center text-white/70">
     <p>ðŸ”® Prediksi berdasarkan analisis pola SHIO â€¢ Gunakan dengan bijak</p>
    </footer>
   </div>
  </main>
  <script>
        // SHIO data
        const shioData = {
            1: [1, 3, 7, 2, 6, 8],
            2: [3, 7, 9, 2, 4, 8],
            3: [3, 5, 9, 4, 8, 10],
            4: [5, 9, 11, 4, 6, 10],
            5: [5, 7, 11, 6, 10, 12],
            6: [1, 7, 11, 6, 8, 12],
            7: [1, 7, 9, 2, 8, 12],
            8: [1, 3, 9, 2, 8, 10],
            9: [3, 9, 11, 2, 4, 10]
        };

        // Default configuration
        const defaultConfig = {
            app_title: "SHIO 2D Predictor",
            prediction_label: "Prediksi 2D ON",
            generate_button_text: "Generate Prediksi"
        };

        // Generate 2D numbers based on SHIO multiples of 12
        function generate2DNumbers(baseNumbers) {
            const predictions = new Set();
            
            // For each SHIO base number, generate all multiples of 12 up to 97
            baseNumbers.forEach(shio => {
                let current = shio;
                while (current <= 97) {
                    predictions.add(String(current).padStart(2, '0'));
                    current += 12;
                }
            });
            
            return Array.from(predictions).sort((a, b) => parseInt(a) - parseInt(b));
        }

        // Filter numbers based on main numbers and filter type
        function filterNumbers(predictions, mainNumbers, filterType) {
            if (!mainNumbers || mainNumbers.trim() === '') {
                return [];
            }

            const mainDigits = mainNumbers.replace(/\D/g, '').split('').slice(0, 7);
            const filtered = [];

            predictions.forEach(num => {
                const kepala = num[0]; // First digit
                const ekor = num[1];   // Second digit

                let shouldInclude = false;

                if (filterType === 'kepala') {
                    shouldInclude = mainDigits.includes(kepala);
                } else if (filterType === 'ekor') {
                    shouldInclude = mainDigits.includes(ekor);
                } else if (filterType === 'semua') {
                    shouldInclude = mainDigits.includes(kepala) || mainDigits.includes(ekor);
                }

                if (shouldInclude) {
                    filtered.push(num);
                }
            });

            return filtered;
        }

        // Copy filtered numbers to clipboard
        function copyToClipboard() {
            const filteredText = document.getElementById('filtered-numbers').textContent;
            navigator.clipboard.writeText(filteredText).then(() => {
                const copyBtn = document.getElementById('copy-btn');
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'âœ… Tersalin!';
                copyBtn.classList.add('bg-green-700');
                
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                    copyBtn.classList.remove('bg-green-700');
                }, 2000);
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = filteredText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const copyBtn = document.getElementById('copy-btn');
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'âœ… Tersalin!';
                
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                }, 2000);
            });
        }

        // Generate prediction
        function generatePrediction() {
            // Randomly select a SHIO
            const shioNumbers = Object.keys(shioData);
            const selectedShio = shioNumbers[Math.floor(Math.random() * shioNumbers.length)];
            const baseNumbers = shioData[selectedShio];
            
            // Generate 2D predictions
            const predictions = generate2DNumbers(baseNumbers);
            
            // Display results
            document.getElementById('selected-shio').textContent = `JUMLAH ${selectedShio}`;
            
            // Display base numbers
            const baseContainer = document.getElementById('base-numbers');
            baseContainer.innerHTML = '';
            baseNumbers.forEach(num => {
                const div = document.createElement('div');
                div.className = 'number-item';
                div.textContent = num;
                baseContainer.appendChild(div);
            });
            
            // Display all predictions
            const predictionContainer = document.getElementById('prediction-numbers');
            predictionContainer.innerHTML = '';
            predictions.forEach(num => {
                const div = document.createElement('div');
                div.className = 'number-item';
                div.textContent = num;
                predictionContainer.appendChild(div);
            });
            
            // Apply filter if main numbers are provided
            const mainNumbers = document.getElementById('main-numbers').value;
            const filterType = document.querySelector('input[name="filter-type"]:checked').value;
            
            if (mainNumbers && mainNumbers.trim() !== '') {
                const filteredNumbers = filterNumbers(predictions, mainNumbers, filterType);
                
                if (filteredNumbers.length > 0) {
                    // Show filtered results
                    document.getElementById('filtered-result').classList.remove('hidden');
                    
                    // Update filter info
                    const filterInfo = document.getElementById('filter-info');
                    const mainDigits = mainNumbers.replace(/\D/g, '').split('').slice(0, 7).join(', ');
                    let filterTypeText = '';
                    
                    if (filterType === 'kepala') {
                        filterTypeText = 'kepala';
                    } else if (filterType === 'ekor') {
                        filterTypeText = 'ekor';
                    } else {
                        filterTypeText = 'kepala atau ekor';
                    }
                    
                    filterInfo.textContent = `Filter: Angka main ${mainDigits} pada ${filterTypeText}`;
                    
                    // Display filtered numbers with * separator
                    const filteredContainer = document.getElementById('filtered-numbers');
                    filteredContainer.textContent = filteredNumbers.join('*');
                    
                    // Show count
                    document.getElementById('filtered-count').textContent = `Total: ${filteredNumbers.length} angka`;
                } else {
                    // Hide filtered results if no matches
                    document.getElementById('filtered-result').classList.add('hidden');
                }
            } else {
                // Hide filtered results if no main numbers
                document.getElementById('filtered-result').classList.add('hidden');
            }
            
            // Show result section
            document.getElementById('prediction-result').classList.remove('hidden');
        }

        // Event listeners
        document.getElementById('generate-btn').addEventListener('click', generatePrediction);
        document.getElementById('copy-btn').addEventListener('click', copyToClipboard);
        
        // Auto-filter when main numbers change
        document.getElementById('main-numbers').addEventListener('input', function() {
            // Only auto-filter if prediction is already shown
            if (!document.getElementById('prediction-result').classList.contains('hidden')) {
                generatePrediction();
            }
        });
        
        // Auto-filter when filter type changes
        document.querySelectorAll('input[name="filter-type"]').forEach(radio => {
            radio.addEventListener('change', function() {
                // Only auto-filter if prediction is already shown
                if (!document.getElementById('prediction-result').classList.contains('hidden')) {
                    generatePrediction();
                }
            });
        });

        // Element SDK implementation
        async function render(config) {
            document.getElementById('app-title').textContent = config.app_title || defaultConfig.app_title;
            document.getElementById('prediction-label').textContent = config.prediction_label || defaultConfig.prediction_label;
            document.getElementById('generate-btn').textContent = config.generate_button_text || defaultConfig.generate_button_text;
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["app_title", config.app_title || defaultConfig.app_title],
                ["prediction_label", config.prediction_label || defaultConfig.prediction_label],
                ["generate_button_text", config.generate_button_text || defaultConfig.generate_button_text]
            ]);
        }

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                render,
                mapToCapabilities,
                mapToEditPanelValues
            });
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9907539971abaa0f',t:'MTc2MDc4MzA3Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
